# ChatRoom

## 要求：
- 用java socket分别编写服务器端和客户端程序，实现服务器端多线程处理客户端请求；
- 要去用TCP链接，端口12345；
- 成功连接后，客户端收到”连接成功，请您登陆！“；
- 尚未连接时，发送任何消息显示”登录信息格式不正确！请重新登陆！“；
- 用户输入“login：用户名”可登陆（无需密码），如果有同名的人在线返回”用户名重复，请重新登陆“；
- 登陆成功后，客户端返回“欢迎‘用户名’登录”，其他人收到”***已经登录“；
- 用户可以群发消息：“all：消息内容”，群发内容给所有在线用户，发送消息的人显示“发给全部人：消息内容”，其他人收到”***发来消息：消息内容“；
- 用户可以一对一发消息：“接收人名称：消息内容”，只给接收人发消息，发送人显示”发给***：消息内容“，接收人显示”***发来消息：消息内容“；
- 任意用户输入who，得到在线的总人数和所有姓名；
- 任意用户输入help，可以得到聊天软件操作指南；
- 输入其他信息都报错；
- 输入quit退出登录，自己显示”我已经退出登录“，其他人显示”用户***退出登录“；

## 技术难点：
- 在client中，由于同一个程序不能够同时完成“实时监听server端消息并显示”“实时监听用户在键盘的输入并发送给server”两个任务，故将前者交由另外一个线程去处理；
- 在server中，为了保证server端不间断倾听client端，要加上while (true)语句；
- server端将所有的登录用户信息保存在HashMap中，key是用户名，value是这个用户对应的server端处理线程的引用；
- 为了让server端每个线程都能访问到保存用户信息的HashMap，这个HashMap必须是public static的成员变量；
- 实现聊天的方法：每个client都将自己发送的信息先发送到server端对应的线程中，server端决定是发给所有人（群聊）还是只发给某个人（单聊）；

## 运行方法：
- 先起server端，再起client端，按照上面的聊天规则输入相应的语句，看看控制台输出是否正确；

